perl parts_01.pl

要作成	-----------------------------------------------------
standard.opf
navigation-documents.xhtml

p-cover.xhtml			カバー
p-titlepage.xhtml		タイトルページ
p-toc.xhtml				目次ページ
p-colophon.xhtml		奥付

p-001.xhtml
p-002.xhtml
p-ad-001.xhtml


段取り	-----------------------------------------------------
InDesign	
ok			・目次と本体を見て、構造（階層）を判断
ok			・必要なスタイルを付ける（目次_章・目次_節など、階層によって別名に）
ok			・ノンブルは削除
ok			・目次はファイル内リンクを作成
未			・テキストボックスまたはスタイルによって英数字の回転をしている。そこはどうするか？
go				→　InDesign上で検索・テキストに縦中横の処置？（出力してタグ（半角英数字）が付く前に）
NG				→　html上で、正規表現で英数字の検索・置換？（あるいはタグ抜きテキストで）
ok			・htmlで書き出し
未			・画像ページ作成（画像ページをPDF（かjpg）出力。

html　→　調整html
		・01スクリプトで作業か？
		・同時に、タグ抜きhtmlも出力
		・カット位置、タグをカット位置指定とする
			目次とか奥付とか	<div class="_idGen　・・・・<!-- filename_●● -->
			テキスト系ページ	<div class="_idGenStoryDirection-●"
			画像系ページ		<div class="_idGenObjectLayout-●">
		・画像ページ
			いろいろな画像やキャプションのあるページは、
			InDesign時にページ画像（PDFから切り出し）にして貼り換え、
			書き出した時にはシンプルになっているようにする。
				→　実画像は03_materials/imageにセット
		・体裁
			ルビ・縦中横、インデント（下揃え、注釈、小書き、etc）
				何があるか、事前に把握要
			奥付	各社ごとに用意


変換
半	書誌読み取り
ok	元html読み取り
ok	テンプレート読み取り
未		→　テンプレ多数
			注意点
	XHTML変換	
確認	・方向がページごとに違うことあり
ok		・画像ページと本文ページのテンプレートを使い分け、
ok		　出力ファイル名カウンターは共通
ok		・xhtmlヘッダーに各種●囲みの要素文字変換
ok			ページ方向
ok			タイトル名
ok			bodyにページ毎のクラスが入る
ok			最初のdivタグにtocのidが入ることがある
半				なければ●＿●を削除する必要。
ok		・特定のタグを見つけ、テンプレートに落とし込み、xhtmlで出力
ok			同時に、目次idを把握、XHTML名を、目次部分のxhtml名に書き換え
ok			→　繰り返し、ファイルに連番をつけて出力

未	目次の整形
		元のhtmlの目次部分をカットし、定型名の1ファイルにペースト
		↓
ok		→	p-toc.html

ok		→	navigation_documentの生成

未	奥付の整形
		版元のテンプレに依るなあ・・・
		サンプルで来たものだけテンプレ化と、運用は手動な気がする・・・
		
未	注釈づくり（戻りができる）
		<a class="noteref" id="noteref-001" href="p-cyushaku.xhtml#note-001">
		<a class="note" id="note-001" href="p-002.xhtml#noteref-001">



整理	-----------------------------------------------------

タイトル掲載




















